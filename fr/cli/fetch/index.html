<!doctype html>
<html class="docs-version-6.x" lang="fr" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<link rel="alternate" type="application/rss+xml" href="/fr/blog/rss.xml" title="pnpm RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/fr/blog/atom.xml" title="pnpm Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-91385296-1"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-91385296-1",{anonymize_ip:!0})</script>
<link rel="search" type="application/opensearchdescription+xml" title="pnpm" href="/fr/opensearch.xml">
<script src="https://buttons.github.io/buttons.js"></script>
<script src="/homepage.js"></script><title data-react-helmet="true">pnpm fetch | pnpm</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:image" content="https://pnpm.io/fr/img/ogimage.png"><meta data-react-helmet="true" name="twitter:image" content="https://pnpm.io/fr/img/ogimage.png"><meta data-react-helmet="true" property="og:url" content="https://pnpm.io/fr/cli/fetch"><meta data-react-helmet="true" name="docsearch:language" content="fr"><meta data-react-helmet="true" name="docsearch:version" content="6.x"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-6.x"><meta data-react-helmet="true" property="og:title" content="pnpm fetch | pnpm"><meta data-react-helmet="true" name="description" content="Récupère les paquets d&#x27;un fichier de verrouillage dans le magasin virtuel, le manifeste des paquets est ignoré."><meta data-react-helmet="true" property="og:description" content="Récupère les paquets d&#x27;un fichier de verrouillage dans le magasin virtuel, le manifeste des paquets est ignoré."><link data-react-helmet="true" rel="icon" href="/fr/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://pnpm.io/fr/cli/fetch"><link data-react-helmet="true" rel="alternate" href="https://pnpm.io/cli/fetch" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://pnpm.io/it/cli/fetch" hreflang="it"><link data-react-helmet="true" rel="alternate" href="https://pnpm.io/zh/cli/fetch" hreflang="zh"><link data-react-helmet="true" rel="alternate" href="https://pnpm.io/ja/cli/fetch" hreflang="ja"><link data-react-helmet="true" rel="alternate" href="https://pnpm.io/ru/cli/fetch" hreflang="ru"><link data-react-helmet="true" rel="alternate" href="https://pnpm.io/fr/cli/fetch" hreflang="fr"><link data-react-helmet="true" rel="alternate" href="https://pnpm.io/tr/cli/fetch" hreflang="tr"><link data-react-helmet="true" rel="alternate" href="https://pnpm.io/es/cli/fetch" hreflang="es"><link data-react-helmet="true" rel="alternate" href="https://pnpm.io/pt/cli/fetch" hreflang="pt"><link data-react-helmet="true" rel="alternate" href="https://pnpm.io/id/cli/fetch" hreflang="id"><link data-react-helmet="true" rel="alternate" href="https://pnpm.io/hu/cli/fetch" hreflang="hu"><link data-react-helmet="true" rel="alternate" href="https://pnpm.io/pl/cli/fetch" hreflang="pl"><link data-react-helmet="true" rel="alternate" href="https://pnpm.io/de/cli/fetch" hreflang="de"><link data-react-helmet="true" rel="alternate" href="https://pnpm.io/ko/cli/fetch" hreflang="ko"><link data-react-helmet="true" rel="alternate" href="https://pnpm.io/cli/fetch" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://RAHRBBK2WL-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/fr/assets/css/styles.a657d2b0.css">
<link rel="preload" href="/fr/assets/js/runtime~main.69e8c316.js" as="script">
<link rel="preload" href="/fr/assets/js/main.6c88b08f.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_qI88">Passer au contenu principal</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/fr/"><div class="navbar__logo"><img src="/fr/img/pnpm-no-name-with-frame.svg" alt="pnpm" class="themedImage_eCVp themedImage--light_aqmL"><img src="/fr/img/pnpm-no-name-with-frame.svg" alt="pnpm" class="themedImage_eCVp themedImage--dark_ujrk"></div><b class="navbar__title">pnpm</b></a><a class="navbar__item navbar__link" href="/fr/motivation">Documentations</a><a class="navbar__item navbar__link" href="/fr/blog">Blog</a><a class="navbar__item navbar__link" href="/fr/faq">FAQ</a><a class="navbar__item navbar__link" href="/fr/community/articles">Communauté</a><a class="navbar__item navbar__link" href="/fr/benchmarks">Références</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" href="/fr/motivation">6.x</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/fr/next/cli/fetch">Suivant</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/fr/cli/fetch">6.x</a></li><li><a class="dropdown__link" href="/fr/5.x/motivation">5.x</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__link"><span><svg viewBox="0 0 20 20" width="20" height="20" aria-hidden="true" class="iconLanguage_8GUk"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>Français (24%)</span></span></a><ul class="dropdown__menu"><li><a href="/cli/fetch" target="_self" rel="noopener noreferrer" class="dropdown__link">English</a></li><li><a href="/it/cli/fetch" target="_self" rel="noopener noreferrer" class="dropdown__link">Italiano (100%)</a></li><li><a href="/zh/cli/fetch" target="_self" rel="noopener noreferrer" class="dropdown__link">中文 (91%)</a></li><li><a href="/ja/cli/fetch" target="_self" rel="noopener noreferrer" class="dropdown__link">日本語 (68%)</a></li><li><a href="/ru/cli/fetch" target="_self" rel="noopener noreferrer" class="dropdown__link">Русский (30%)</a></li><li><a href="/fr/cli/fetch" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active">Français (24%)</a></li><li><a href="/tr/cli/fetch" target="_self" rel="noopener noreferrer" class="dropdown__link">Türkçe (21%)</a></li><li><a href="/es/cli/fetch" target="_self" rel="noopener noreferrer" class="dropdown__link">Español (20%)</a></li><li><a href="/pt/cli/fetch" target="_self" rel="noopener noreferrer" class="dropdown__link">Português Brasileiro (19%)</a></li><li><a href="/id/cli/fetch" target="_self" rel="noopener noreferrer" class="dropdown__link">Bahasa Indonesia (17%)</a></li><li><a href="/hu/cli/fetch" target="_self" rel="noopener noreferrer" class="dropdown__link">Magyar (11%)</a></li><li><a href="/pl/cli/fetch" target="_self" rel="noopener noreferrer" class="dropdown__link">Polski (9%)</a></li><li><a href="/de/cli/fetch" target="_self" rel="noopener noreferrer" class="dropdown__link">Deutsch (6%)</a></li><li><a href="/ko/cli/fetch" target="_self" rel="noopener noreferrer" class="dropdown__link">한국어 (6%)</a></li><li><a href="https://crowdin.com/project/pnpm" target="_blank" rel="noopener noreferrer" class="dropdown__link">Help Us Translate</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__link">🧡 Sponsorisez-nous</a><ul class="dropdown__menu"><li><a href="https://opencollective.com/pnpm" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>Open Collective<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_SaqY"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://github.com/sponsors/pnpm" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>GitHub Sponsors<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_SaqY"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a class="dropdown__link" href="/fr/crypto-donations">Dons en crypto-monnaie</a></li></ul></div><a href="https://github.com/pnpm/pnpm" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_P62M toggle_xluH toggleDisabled_4zpe"><div class="toggleTrack_DnJp" role="button" tabindex="-1"><div class="toggleTrackCheck_vcqH"><span class="toggleIcon_UbS+">🌜</span></div><div class="toggleTrackX_qVMl"><span class="toggleIcon_UbS+">🌞</span></div><div class="toggleTrackThumb_mYLB"></div></div><input type="checkbox" class="toggleScreenReader_4Uwl" aria-label="Switch between dark and light mode"></div><div class="searchBox_Ntwv"><button type="button" class="DocSearch DocSearch-Button" aria-label="Rechercher"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Rechercher</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_Xl2i"><button aria-label="Retourner en haut de la page" class="clean-btn theme-back-to-top-button backToTopButton_YGOb" type="button"></button><aside class="docSidebarContainer_s1gS"><div class="sidebar_5845"><nav class="menu thin-scrollbar menu_92o-"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VAID" href="/fr/motivation">Introduction</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VAID" href="/fr/pnpm-cli">Usage</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_VAID" href="/fr/cli/add">CLI commands</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_VAID" tabindex="0" href="/fr/cli/add">Manage dependencies</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/fr/cli/add">pnpm add &lt;pkg&gt;</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/fr/cli/install">pnpm install</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/fr/cli/update">pnpm update</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/fr/cli/remove">pnpm remove</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/fr/cli/link">pnpm link</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/fr/cli/unlink">pnpm unlink</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/fr/cli/import">pnpm import</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/fr/cli/rebuild">pnpm rebuild</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/fr/cli/prune">pnpm prune</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/fr/cli/fetch">pnpm fetch</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/fr/cli/install-test">pnpm install-test</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VAID" tabindex="0" href="/fr/cli/audit">Review dependencies</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VAID" tabindex="0" href="/fr/cli/run">Run scripts</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VAID" tabindex="0" href="/fr/cli/env">Manage environments</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VAID" tabindex="0" href="/fr/cli/publish">Misc.</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VAID" href="/fr/package_json">Configuration</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VAID" href="/fr/workspaces">Features</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VAID" href="/fr/using-changesets">Recipes</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VAID" href="/fr/feature-comparison">Advanced</a></div></li></ul></nav></div></aside><main class="docMainContainer_lbOj"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zG6T"><div class="docItemContainer_too7"><article><span class="theme-doc-version-badge badge badge--secondary">Version: <!-- -->6.x</span><div class="tocCollapsible_KYGY theme-doc-toc-mobile tocMobile_9LCv"><button type="button" class="clean-btn tocCollapsibleButton_1-Ia">Sur cette page</button></div><div class="theme-doc-markdown markdown"><header><h1>pnpm fetch</h1></header><p>Récupère les paquets d&#x27;un fichier de verrouillage dans le magasin virtuel, le manifeste des paquets est ignoré.</p><div class="admonition admonition-warning alert alert--danger"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>warning</h5></div><div class="admonition-content"><p>Ceci est une commande expérimentale. Des changements de rupture peuvent être introduits dans les versions non majeures du CLI.</p></div></div><h2 class="anchor anchorWithStickyNavbar_mmVH" id="scénario-dutilisation">Scénario d&#x27;utilisation<a class="hash-link" href="#scénario-dutilisation" title="Lien direct vers le titre">​</a></h2><p>Cette commande est spécifiquement conçue pour booster la construction d&#x27;une image docker.</p><p>Vous avez peut-être lu le <a href="https://nodejs.org/en/docs/guides/nodejs-docker-webapp/" target="_blank" rel="noopener noreferrer">guide officiel</a> pour écrire un Dockerfile pour une application Node.js, si vous ne l&#x27;avez pas encore lu, vous pouvez le lire en premier.</p><p>À partir de ce guide, nous apprenons à écrire un Dockerfile optimisé pour les projets utilisant pnpm, qui ressemblera à</p><div class="codeBlockContainer_x9LQ language-Dockerfile theme-code-block"><div class="codeBlockContent_LgNW Dockerfile"><pre tabindex="0" class="prism-code language-Dockerfile codeBlock_Blly thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_DrNa"><span class="token-line" style="color:#393A34"><span class="token plain">FROM node:14</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN curl -f https://get.pnpm.io/v6.16.js | node - add --global pnpm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Fichiers requis par pnpm install</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY .npmrc package.json pnpm-lock.yaml .pnpmfile.cjs ./</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN pnpm install --frozen-lockfile --prod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Source de l&#x27;application groupée</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY . .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EXPOSE 8080</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CMD [ &quot;node&quot;, &quot;server.js&quot; ]</span><br></span></code></pre><button type="button" aria-label="Copier le code dans le presse-papiers" class="copyButton_rpCi clean-btn">Copier</button></div></div><p>Tant qu&#x27;il n&#x27;y a pas de changement à <code>.npmrc</code>, <code>paquet. son</code>, <code>pnpm-lock.yaml</code>, <code>.pnpmfile. js</code>, le cache de construction de docker est toujours valide jusqu&#x27;à la couche de <code>RUN pnpm install --frozen-lockfile --prod</code>, qui coûtent la plupart du temps lors de la construction d&#x27;une image de docker.</p><p>Cependant, la modification du <code>package.json</code> peut se produire beaucoup plus fréquemment que nous nous attendions, car il ne contient pas seulement des dépendances, mais peut également contenir le numéro de version, des scripts et une configuration arbitraire pour tout autre outil.</p><p>Il est également difficile de maintenir un Dockerfile qui construit un projet monorepo, il peut ressembler</p><div class="codeBlockContainer_x9LQ language-Dockerfile theme-code-block"><div class="codeBlockContent_LgNW Dockerfile"><pre tabindex="0" class="prism-code language-Dockerfile codeBlock_Blly thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_DrNa"><span class="token-line" style="color:#393A34"><span class="token plain">FROM node:14</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN curl -f https://get.pnpm.io/v6.16.js | node - add --global pnpm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Fichiers requis par pnpm install</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY .npmrc package.json pnpm-lock.yaml .pnpmfile.cjs ./</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># pour chaque sous-paquet, nous devons ajouter une étape supplémentaire pour copier son manifeste</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># au bon endroit, car docker n&#x27;a aucun moyen de filtrer uniquement le package.json avec</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># une seule instruction</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY packages/foo/backage.json packages/foo/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY packages/bar/backage.json packages/bar/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN pnpm install --frozen-lockfile --prod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Source de l&#x27;application groupée</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY . .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EXPOSE 8080</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CMD [ &quot;node&quot;, &quot;server.js&quot; ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copier le code dans le presse-papiers" class="copyButton_rpCi clean-btn">Copier</button></div></div><p>Comme vous pouvez le constater, le Dockerfile doit être mis à jour lorsque vous ajoutez ou supprimez des sous-paquets.</p><p><code>pnpm fetch</code> résoudra parfaitement le problème ci-dessus en fournissant la possibilité de récupérer un paquet dans un magasin virtuel avec des informations provenant uniquement d&#x27;un fichier de verrouillage.</p><div class="codeBlockContainer_x9LQ language-Dockerfile theme-code-block"><div class="codeBlockContent_LgNW Dockerfile"><pre tabindex="0" class="prism-code language-Dockerfile codeBlock_Blly thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_DrNa"><span class="token-line" style="color:#393A34"><span class="token plain">FROM node:14</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN curl -f https://get.pnpm.io/v6.16.js | node - add --global pnpm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># pnpm fetch ne nécessite que lockfile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY pnpm-lock.yaml ./</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN pnpm fetch --prod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ADD . ./</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN pnpm install -r --offline --prod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EXPOSE 8080</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CMD [ &quot;node&quot;, &quot;server.js&quot; ]</span><br></span></code></pre><button type="button" aria-label="Copier le code dans le presse-papiers" class="copyButton_rpCi clean-btn">Copier</button></div></div><p>Cela fonctionne aussi bien pour un projet simple que pour un projet monorepo, <code>--offline</code> impose à pnpm à ne pas communiquer avec le registre des paquets car tous les paquets nécessaires seront déjà présentés dans le magasin virtuel.</p><p>Tant que le fichier de verrouillage n&#x27;est pas modifié, le cache de construction est valide jusqu&#x27;à la couche <code>RUN pnpm install -r --offline --prod</code>, qui vous fera gagner beaucoup de temps.</p><h2 class="anchor anchorWithStickyNavbar_mmVH" id="options">Options<a class="hash-link" href="#options" title="Lien direct vers le titre">​</a></h2><h3 class="anchor anchorWithStickyNavbar_mmVH" id="--dev">--dev<a class="hash-link" href="#--dev" title="Lien direct vers le titre">​</a></h3><p>Seuls les paquets de développement seront récupérés</p><h3 class="anchor anchorWithStickyNavbar_mmVH" id="--prod">--prod<a class="hash-link" href="#--prod" title="Lien direct vers le titre">​</a></h3><p>Les paquets de développement ne seront pas récupérés</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://crowdin.com/project/pnpm/fr" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_FHXH" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Modifier cette page</a></div><div class="col lastUpdated_NJ3R"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Navigation dans les pages de documentation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/fr/cli/prune"><div class="pagination-nav__sublabel">Précédent</div><div class="pagination-nav__label">pnpm prune</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/fr/cli/install-test"><div class="pagination-nav__sublabel">Suivant</div><div class="pagination-nav__label">pnpm install-test</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_p+SP thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#scénario-dutilisation" class="table-of-contents__link toc-highlight">Scénario d&#39;utilisation</a></li><li><a href="#options" class="table-of-contents__link toc-highlight">Options</a><ul><li><a href="#--dev" class="table-of-contents__link toc-highlight">--dev</a></li><li><a href="#--prod" class="table-of-contents__link toc-highlight">--prod</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Documentations</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/fr/installation">Premiers pas</a></li><li class="footer__item"><a class="footer__link-item" href="/fr/pnpm-cli">pnpm CLI</a></li><li class="footer__item"><a class="footer__link-item" href="/fr/workspaces">Workspace</a></li><li class="footer__item"><a class="footer__link-item" href="/fr/npmrc">.npmrc</a></li></ul></div><div class="col footer__col"><div class="footer__title">Communauté</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/fr/users">User Showcase</a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/pnpm" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_SaqY"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://r.pnpm.io/chat" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Chat du projet<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_SaqY"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/pnpmjs" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_SaqY"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Contribuer</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/pnpm/pnpm" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_SaqY"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://crowdin.com/project/pnpm" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Aidez-nous à traduire<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_SaqY"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title"></div><ul class="footer__items"><li class="footer__item"><a href="https://www.netlify.com">
  <img src="https://www.netlify.com/img/global/badges/netlify-light.svg" alt="Deploys by Netlify">
</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/fr/img/pnpm-light.svg" alt="" class="themedImage_eCVp themedImage--light_aqmL footer__logo"><img src="/fr/img/pnpm-light.svg" alt="" class="themedImage_eCVp themedImage--dark_ujrk footer__logo"></div><div class="footer__copyright">Copyright © 2015-2022 contributors of pnpm</div></div></div></footer></div>
<script src="/fr/assets/js/runtime~main.69e8c316.js"></script>
<script src="/fr/assets/js/main.6c88b08f.js"></script>
</body>
</html>