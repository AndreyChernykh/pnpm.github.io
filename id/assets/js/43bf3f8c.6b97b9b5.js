"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2808],{9613:(e,a,t)=>{t.d(a,{Zo:()=>u,kt:()=>k});var n=t(9496);function o(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function r(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function i(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?r(Object(t),!0).forEach((function(a){o(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function l(e,a){if(null==e)return{};var t,n,o=function(e,a){if(null==e)return{};var t,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)t=r[n],a.indexOf(t)>=0||(o[t]=e[t]);return o}(e,a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)t=r[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var p=n.createContext({}),s=function(e){var a=n.useContext(p),t=a;return e&&(t="function"==typeof e?e(a):i(i({},a),e)),t},u=function(e){var a=s(e.components);return n.createElement(p.Provider,{value:a},e.children)},d={inlineCode:"code",wrapper:function(e){var a=e.children;return n.createElement(n.Fragment,{},a)}},m=n.forwardRef((function(e,a){var t=e.components,o=e.mdxType,r=e.originalType,p=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),m=s(t),k=o,c=m["".concat(p,".").concat(k)]||m[k]||d[k]||r;return t?n.createElement(c,i(i({ref:a},u),{},{components:t})):n.createElement(c,i({ref:a},u))}));function k(e,a){var t=arguments,o=a&&a.mdxType;if("string"==typeof e||o){var r=t.length,i=new Array(r);i[0]=m;var l={};for(var p in a)hasOwnProperty.call(a,p)&&(l[p]=a[p]);l.originalType=e,l.mdxType="string"==typeof e?e:o,i[1]=l;for(var s=2;s<r;s++)i[s]=t[s];return n.createElement.apply(null,i)}return n.createElement.apply(null,t)}m.displayName="MDXCreateElement"},6310:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>u,contentTitle:()=>p,default:()=>k,frontMatter:()=>l,metadata:()=>s,toc:()=>d});var n=t(2848),o=t(9213),r=(t(9496),t(9613)),i=["components"],l={title:"Opsi konfigurasi Node-Modules dengan pnpm",author:"Zoltan Kochan",authorURL:"http://twitter.com/zoltankochan",authorImageURL:"https://gravatar.com/avatar/1f59f040fb37d5799e3879fa678c2373?s=48"},p=void 0,s={permalink:"/id/blog/2020/10/17/node-modules-configuration-options-with-pnpm",editUrl:"https://crowdin.com/project/pnpm/id",source:"@site/i18n/id/docusaurus-plugin-content-blog/2020-10-17-node-modules-configuration-options-with-pnpm.md",title:"Opsi konfigurasi Node-Modules dengan pnpm",description:"Ada banyak cara untuk membuat direktori nodemodules. Tujuan anda adalah untuk membuat direktori dengan mode strict semaksimal mungkin, medkipun demikian ada opsi untuk membuat nodemodules yang lebih longgar.",date:"2020-10-17T00:00:00.000Z",formattedDate:"17 Oktober 2020",tags:[],readingTime:1.71,truncated:!0,authors:[{name:"Zoltan Kochan",url:"http://twitter.com/zoltankochan",imageURL:"https://gravatar.com/avatar/1f59f040fb37d5799e3879fa678c2373?s=48"}],frontMatter:{title:"Opsi konfigurasi Node-Modules dengan pnpm",author:"Zoltan Kochan",authorURL:"http://twitter.com/zoltankochan",authorImageURL:"https://gravatar.com/avatar/1f59f040fb37d5799e3879fa678c2373?s=48"},prevItem:{title:"Tahun 2021 untuk pnpm",permalink:"/id/blog/2021/12/29/yearly-update"},nextItem:{title:"Flat node_modules bukan satu-satunya cara",permalink:"/id/blog/2020/05/27/flat-node-modules-is-not-the-only-way"}},u={authorsImageUrls:[void 0]},d=[{value:"Pengaturan standar",id:"pengaturan-standar",level:2},{value:"Plug&#39;n&#39;Play. Konfigurasi paling ketat",id:"plugnplay-konfigurasi-paling-ketat",level:2},{value:"Mode ketat, tradisional module direktori",id:"mode-ketat-tradisional-module-direktori",level:2},{value:"The worst case - hoisting to the root",id:"the-worst-case---hoisting-to-the-root",level:2}],m={toc:d};function k(e){var a=e.components,t=(0,o.Z)(e,i);return(0,r.kt)("wrapper",(0,n.Z)({},m,t,{components:a,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Ada banyak cara untuk membuat direktori node_modules. Tujuan anda adalah untuk membuat direktori dengan mode strict semaksimal mungkin, medkipun demikian ada opsi untuk membuat node_modules yang lebih longgar."),(0,r.kt)("h2",{id:"pengaturan-standar"},"Pengaturan standar"),(0,r.kt)("p",null,"Secara standar, pnpm v5 akan membuat node_modules semi-ketat. Semi-ketat berarti aplikasi Anda hanya dapat meminta paket yang ditambahkan sebagai dependensi ke ",(0,r.kt)("inlineCode",{parentName:"p"},"package.json")," (dengan beberapa pengecualian). Namun, dependensi Anda akan dapat mengakses paket apa pun."),(0,r.kt)("p",null,"Konfigurasi standar terlihat seperti ini:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ini"},"; All packages are hoisted to node_modules/.pnpm/node_modules\nhoist-pattern[]=*\n\n; All types are hoisted to the root in order to make TypeScript happy\npublic-hoist-pattern[]=*types*\n\n; All ESLint-related packages are hoisted to the root as well\npublic-hoist-pattern[]=*eslint*\n")),(0,r.kt)("h2",{id:"plugnplay-konfigurasi-paling-ketat"},"Plug'n'Play. Konfigurasi paling ketat"),(0,r.kt)("p",null,"pnpm mendukung ",(0,r.kt)("a",{parentName:"p",href:"https://yarnpkg.com/features/pnp"},"Yarn's Plug'n'Play")," sejak v5.9 dirilis. Dengan PnP, aplikasi Anda dan dependensi aplikasi Anda hanya akan memiliki akses ke dependensi yang dideklarasikan. This is even stricter then setting ",(0,r.kt)("inlineCode",{parentName:"p"},"hoist=false")," because inside a monorepo, your application will not be able to access even the dependencies of the root project."),(0,r.kt)("p",null,"Untuk menggunakan Plug'n'Play, gunakan konfigurasi berikut ini:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ini"},"node-linker=pnp\nsymlink=false\n")),(0,r.kt)("h2",{id:"mode-ketat-tradisional-module-direktori"},"Mode ketat, tradisional module direktori"),(0,r.kt)("p",null,"Jika anda belum siap untuk menggunakan Pnp, anda bisa menggunakan mode ketat dan hanya memperbolehkan packages untuk mengakses dependensi mereka sendiri dengan melakukan konfigurasi hoist ke false:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ini"},"hoist=false\n")),(0,r.kt)("p",null,"Namun, jika anda ingin beberapa dependensi mengakses packages yang tidak memiliki dependensi, anda memiliki dua opsi:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Buat ",(0,r.kt)("inlineCode",{parentName:"p"},"pnpmfile.js")," file dan gunakan ",(0,r.kt)("a",{parentName:"p",href:"/pnpmfile"},"hook")," untuk menambahkan dependensi yang hilang ke dalam package's manifest.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Tambahkan pola ke pengaturan ",(0,r.kt)("inlineCode",{parentName:"p"},"hoist-pattern"),". For instance, if the not found module is ",(0,r.kt)("inlineCode",{parentName:"p"},"babel-core"),", add the following setting to ",(0,r.kt)("inlineCode",{parentName:"p"},".npmrc"),":"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-ini"},"hoist-pattern[]=babel-core\n")))),(0,r.kt)("h2",{id:"the-worst-case---hoisting-to-the-root"},"The worst case - hoisting to the root"),(0,r.kt)("p",null,"Some tools might not work even with the default configuration of pnpm, which hoists everything to the root of the virtual store and some packages to the root. In this case, you can hoist either everything or a subset of dependencies to the root of the modules directory."),(0,r.kt)("p",null,"Hoisting everything to the root of node_modules:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ini"},"shamefully-hoist=true\n")),(0,r.kt)("p",null,"Hoisting only packages that match a pattern:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ini"},"public-hoist-pattern[]=babel-*\n")))}k.isMDXComponent=!0}}]);