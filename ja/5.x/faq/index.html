<!doctype html>
<html lang="ja" dir="ltr" class="docs-wrapper docs-doc-page docs-version-5.x plugin-docs plugin-id-default docs-doc-id-faq">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.18">
<link rel="alternate" type="application/rss+xml" href="/ja/blog/rss.xml" title="pnpm RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/ja/blog/atom.xml" title="pnpm Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-91385296-1"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-91385296-1",{anonymize_ip:!0})</script>
<link rel="search" type="application/opensearchdescription+xml" title="pnpm" href="/ja/opensearch.xml">
<script src="https://buttons.github.io/buttons.js"></script>
<script src="/homepage.js"></script><title data-rh="true">よくある質問 (FAQ) | pnpm</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://pnpm.io/ja/img/ogimage.png"><meta data-rh="true" name="twitter:image" content="https://pnpm.io/ja/img/ogimage.png"><meta data-rh="true" property="og:url" content="https://pnpm.io/ja/5.x/faq"><meta data-rh="true" name="docusaurus_locale" content="ja"><meta data-rh="true" name="docsearch:language" content="ja"><meta data-rh="true" name="docusaurus_version" content="5.x"><meta data-rh="true" name="docusaurus_tag" content="docs-default-5.x"><meta data-rh="true" name="docsearch:version" content="5.x"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-5.x"><meta data-rh="true" property="og:title" content="よくある質問 (FAQ) | pnpm"><meta data-rh="true" name="description" content="なぜ、 node_modules フォルダは、パッケージがグローバルストアに保存されている場合にディスク容量を使用するのですか?"><meta data-rh="true" property="og:description" content="なぜ、 node_modules フォルダは、パッケージがグローバルストアに保存されている場合にディスク容量を使用するのですか?"><link data-rh="true" rel="icon" href="/ja/img/favicon.png"><link data-rh="true" rel="canonical" href="https://pnpm.io/ja/5.x/faq"><link data-rh="true" rel="alternate" href="https://pnpm.io/5.x/faq" hreflang="en"><link data-rh="true" rel="alternate" href="https://pnpm.io/it/5.x/faq" hreflang="it"><link data-rh="true" rel="alternate" href="https://pnpm.io/zh/5.x/faq" hreflang="zh"><link data-rh="true" rel="alternate" href="https://pnpm.io/ja/5.x/faq" hreflang="ja"><link data-rh="true" rel="alternate" href="https://pnpm.io/ko/5.x/faq" hreflang="ko"><link data-rh="true" rel="alternate" href="https://pnpm.io/ru/5.x/faq" hreflang="ru"><link data-rh="true" rel="alternate" href="https://pnpm.io/fr/5.x/faq" hreflang="fr"><link data-rh="true" rel="alternate" href="https://pnpm.io/pt/5.x/faq" hreflang="pt"><link data-rh="true" rel="alternate" href="https://pnpm.io/tr/5.x/faq" hreflang="tr"><link data-rh="true" rel="alternate" href="https://pnpm.io/es/5.x/faq" hreflang="es"><link data-rh="true" rel="alternate" href="https://pnpm.io/id/5.x/faq" hreflang="id"><link data-rh="true" rel="alternate" href="https://pnpm.io/5.x/faq" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://RAHRBBK2WL-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/ja/assets/css/styles.b7f7ee8c.css">
<link rel="preload" href="/ja/assets/js/runtime~main.ec198b6b.js" as="script">
<link rel="preload" href="/ja/assets/js/main.0718ccfe.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ebf9">メインコンテンツまでスキップ</a></div><div class="announcementBar_2JIe" style="background-color:#20232a;color:#fff" role="banner"><div class="announcementBarContent_epXY"><a target="_blank" rel="noopener noreferrer" href="https://war.ukraine.ua/support-ukraine/">Support Ukraine 🇺🇦</a></div></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/ja/"><div class="navbar__logo"><img src="/ja/img/pnpm-no-name-with-frame.svg" alt="pnpm" class="themedImage_md4L themedImage--light_NL4s"><img src="/ja/img/pnpm-no-name-with-frame.svg" alt="pnpm" class="themedImage_md4L themedImage--dark_aB73"></div><b class="navbar__title">pnpm</b></a><a href="https://war.ukraine.ua/support-ukraine/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link" image="https://raw.githubusercontent.com/vshymanskyy/StandWithUkraine/main/badges/StandWithUkraine.svg"></a><a class="navbar__item navbar__link" href="/ja/motivation">ドキュメント</a><a class="navbar__item navbar__link" href="/ja/blog">ブログ</a><a class="navbar__item navbar__link" href="/ja/faq">よくある質問</a><a class="navbar__item navbar__link" href="/ja/community/articles">コミュニティ</a><a class="navbar__item navbar__link" href="/ja/benchmarks">ベンチマーク</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/ja/5.x/motivation">5.x</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/ja/next/faq">Next</a></li><li><a class="dropdown__link" href="/ja/faq">7.x</a></li><li><a class="dropdown__link" href="/ja/6.x/faq">6.x</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/ja/5.x/faq">5.x</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><span><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_BDRC"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg><span>日本語 (73%)</span></span></a><ul class="dropdown__menu"><li><a href="/5.x/faq" target="_self" rel="noopener noreferrer" class="dropdown__link">English</a></li><li><a href="/it/5.x/faq" target="_self" rel="noopener noreferrer" class="dropdown__link">Italiano (100%)</a></li><li><a href="/zh/5.x/faq" target="_self" rel="noopener noreferrer" class="dropdown__link">中文 (95%)</a></li><li><a href="/ja/5.x/faq" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active">日本語 (73%)</a></li><li><a href="/ko/5.x/faq" target="_self" rel="noopener noreferrer" class="dropdown__link">한국어 (32%)</a></li><li><a href="/ru/5.x/faq" target="_self" rel="noopener noreferrer" class="dropdown__link">Русский (29%)</a></li><li><a href="/fr/5.x/faq" target="_self" rel="noopener noreferrer" class="dropdown__link">Français (23%)</a></li><li><a href="/pt/5.x/faq" target="_self" rel="noopener noreferrer" class="dropdown__link">Português Brasileiro (22%)</a></li><li><a href="/tr/5.x/faq" target="_self" rel="noopener noreferrer" class="dropdown__link">Türkçe (21%)</a></li><li><a href="/es/5.x/faq" target="_self" rel="noopener noreferrer" class="dropdown__link">Español (21%)</a></li><li><a href="/id/5.x/faq" target="_self" rel="noopener noreferrer" class="dropdown__link">Bahasa Indonesia (18%)</a></li><li><a href="https://crowdin.com/project/pnpm" target="_blank" rel="noopener noreferrer" class="dropdown__link">Help Us Translate</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">🧡 スポンサー</a><ul class="dropdown__menu"><li><a href="https://opencollective.com/pnpm" target="_blank" rel="noopener noreferrer" class="dropdown__link">Open Collective<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_rIxf"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/sponsors/pnpm" target="_blank" rel="noopener noreferrer" class="dropdown__link">GitHub Sponsors<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_rIxf"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a class="dropdown__link" href="/ja/crypto-donations">暗号通貨での寄付</a></li></ul></div><a href="https://github.com/pnpm/pnpm" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_hbIP colorModeToggle_iKex"><button class="clean-btn toggleButton_vilV toggleButtonDisabled_aMNS" type="button" disabled="" title="Switch between dark and light mode (currently ライトモード)" aria-label="Switch between dark and light mode (currently ライトモード)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_hF2a"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon__tqF"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_zEyc"><button type="button" class="DocSearch DocSearch-Button" aria-label="検索"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">検索</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper"><div class="docPage_CMAW"><button aria-label="最上部にスクロール" class="clean-btn theme-back-to-top-button backToTopButton_BxqD" type="button"></button><main class="docMainContainer_MvPt docMainContainerEnhanced_EDl1"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_P_8q"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>これは <!-- -->pnpm<!-- --> <b>5.x</b>のドキュメントであり、現在アクティブにメンテナンスされていません。</div><div class="margin-top--md">最新のドキュメントについては、 <b><a href="/ja/faq">最新バージョン</a></b> (<!-- -->7.x<!-- --> ) を参照してください。</div></div><div class="docItemContainer_lAzK"><article><span class="theme-doc-version-badge badge badge--secondary">Version: 5.x</span><div class="tocCollapsible_pObe theme-doc-toc-mobile tocMobile_JT4w"><button type="button" class="clean-btn tocCollapsibleButton_FUd8">目次</button></div><div class="theme-doc-markdown markdown"><header><h1>よくある質問 (FAQ)</h1></header><h2 class="anchor anchorWithStickyNavbar_tK0N" id="なぜ-node_modules-フォルダはパッケージがグローバルストアに保存されている場合にディスク容量を使用するのですか">なぜ、 <code>node_modules</code> フォルダは、パッケージがグローバルストアに保存されている場合にディスク容量を使用するのですか?<a class="hash-link" href="#なぜ-node_modules-フォルダはパッケージがグローバルストアに保存されている場合にディスク容量を使用するのですか" title="見出しへの直接リンク">​</a></h2><p>pnpm は、 <a href="https://ja.wikipedia.org/wiki/%E3%83%8F%E3%83%BC%E3%83%89%E3%83%AA%E3%83%B3%E3%82%AF" target="_blank" rel="noopener noreferrer">ハードリンク</a> を、グローバルストアからプロジェクトの <code>node_modules</code> フォルダーに作成します。 ハードリンクは、元の ファイルがあるディスク上の同じ場所を指します。 例えば、1MBを占める <code>foo</code> を依存に持つプロジェクトでは、そのプロジェクト配下の <code>node_modules</code> フォルダが、リンク元のグローバルストアと同じ 1MB を消費しているように見えます。 ただし、2つの異なるリンクが示す、占有されている 1MB はディスク上の <em>同じ位置</em> にあります。 そのため、全体で <code>foo</code> は 2MB ではなく 1MB のみ占有しています。</p><p>このテーマの詳細について：</p><ul><li><a href="https://unix.stackexchange.com/questions/88423/why-do-hard-links-seem-to-take-the-same-space-as-the-originals" target="_blank" rel="noopener noreferrer">ハードリンクがリンク元と同じ容量を占めるように見えるのはなぜですか？</a></li><li><a href="https://gist.github.com/zkochan/106cfef49f8476b753a9cbbf9c65aff1" target="_blank" rel="noopener noreferrer">pnpmチャットルームのスレッド</a></li><li><a href="https://github.com/pnpm/pnpm/issues/794" target="_blank" rel="noopener noreferrer">pnpmリポジトリのissue</a></li></ul><h2 class="anchor anchorWithStickyNavbar_tK0N" id="windowsで動作しますか">Windowsで動作しますか？<a class="hash-link" href="#windowsで動作しますか" title="見出しへの直接リンク">​</a></h2><p>簡単な答え：はい。</p><p>詳細な答え: Windows 上でシンボリックリンクを使用することに関しては少なくとも問題はありますが、しかし、pnpm には回避策があります。 Windows では、代わりに <a href="https://docs.microsoft.com/en-us/windows/win32/fileio/hard-links-and-junctions" target="_blank" rel="noopener noreferrer">ジャンクション</a> を使用します。</p><h2 class="anchor anchorWithStickyNavbar_tK0N" id="しかしネストされた-node_modules-アプローチは-windows-と互換性がありますか">しかし、ネストされた <code>node_modules</code> アプローチは Windows と互換性がありますか？<a class="hash-link" href="#しかしネストされた-node_modules-アプローチは-windows-と互換性がありますか" title="見出しへの直接リンク">​</a></h2><p>npm の初期のバージョンはすべての <code>node_modules</code> を入れ子にするために問題がありました ( <a href="https://github.com/nodejs/node-v0.x-archive/issues/6960" target="_blank" rel="noopener noreferrer">この issue</a> を参照してください)。 しかし、現在 pnpm は依存関係ツリーの構造を作成するのに深いフォルダを作成するのではなく、パッケージをフラットに保存し、それをシンボリックリンクを通じて使用します。</p><h2 class="anchor anchorWithStickyNavbar_tK0N" id="循環シンボリックリンクはどうですか">循環シンボリックリンクはどうですか？<a class="hash-link" href="#循環シンボリックリンクはどうですか" title="見出しへの直接リンク">​</a></h2><p>Although pnpm uses linking to put dependencies into <code>node_modules</code> folders, circular symlinks are avoided because parent packages are placed into the same <code>node_modules</code> folder in which their dependencies are. So <code>foo</code>&#x27;s dependencies are not in <code>foo/node_modules</code>, but <code>foo</code> is in <code>node_modules</code> together with its own dependencies.</p><h2 class="anchor anchorWithStickyNavbar_tK0N" id="なぜハードリンクを使うのですか-直接グローバルストアへのシンボリックリンクを作ってはどうですか">なぜハードリンクを使うのですか？ 直接グローバルストアへのシンボリックリンクを作ってはどうですか？<a class="hash-link" href="#なぜハードリンクを使うのですか-直接グローバルストアへのシンボリックリンクを作ってはどうですか" title="見出しへの直接リンク">​</a></h2><p>1つのパッケージは、1台のマシンで異なる依存関係のセットを持ち得ます。</p><p>In project <strong>A</strong> <code>foo@1.0.0</code> can have a dependency resolved to <code>bar@1.0.0</code>, but in project <strong>B</strong> the same dependency of <code>foo</code> might resolve to <code>bar@1.1.0</code>; so, pnpm hard links <code>foo@1.0.0</code> to every project where it is used, in order to create different sets of dependencies for it.</p><p>Direct symlinking to the global store would work with Node&#x27;s <code>--preserve-symlinks</code> flag, however, that approach comes with a plethora of its own issues, so we decided to stick with hard links. For more details about why this decision was made, see <a href="https://github.com/nodejs/node-eps/issues/46" target="_blank" rel="noopener noreferrer">this issue</a>.</p><h2 class="anchor anchorWithStickyNavbar_tK0N" id="pnpmは複数のドライブまたはファイルシステムをまたいで機能しますか">pnpmは複数のドライブまたはファイルシステムをまたいで機能しますか？<a class="hash-link" href="#pnpmは複数のドライブまたはファイルシステムをまたいで機能しますか" title="見出しへの直接リンク">​</a></h2><p>パッケージストアは、インストール先と同じドライブおよびファイルシステム上にある必要があります そうでない場合、パッケージはリンクされずにコピーされます。 これは、あるファイルシステム上のファイルは、他のファイルシステム上の場所を扱うことができないというハードリンクの仕組みによる制限です。 詳細については、<a href="https://github.com/pnpm/pnpm/issues/712" target="_blank" rel="noopener noreferrer">Issue #712</a> を参照してください。</p><p>pnpmは、以下の2つの場合で異なる動作をします:</p><h3 class="anchor anchorWithStickyNavbar_tK0N" id="ストアのパスが指定された場合">ストアのパスが指定された場合<a class="hash-link" href="#ストアのパスが指定された場合" title="見出しへの直接リンク">​</a></h3><p><a href="/ja/5.x/configuring">ストアの設定</a>でストアのパスが指定されると、違うディスクにあるストアとプロジェクトの間ではコピーが発生します。</p><p>ディスク<code>A</code> で <code>pnpm install</code> を実行する場合、pnpm ストアはディスク<code>A</code> にある必要があります。 もし pnpm ストアがディスク<code>B</code>にある場合、すべての必要なパッケージがプロジェクトにリンクされる代わりにコピーされます。 これは、pnpm のストレージとパフォーマンスに関する利点を阻害します。</p><h3 class="anchor anchorWithStickyNavbar_tK0N" id="ストアのパスが指定されていない場合">ストアのパスが指定されていない場合<a class="hash-link" href="#ストアのパスが指定されていない場合" title="見出しへの直接リンク">​</a></h3><p>ストアのパスが指定されていない場合、一つのドライブやファイルシステムごとに、複数のストアが作成されます。</p><p>インストールがディスク<code>A</code> で実行された場合、ストアは<code>A</code> のファイルシステムのルートの <code>.pnpm-store</code> に作成されます。  その後、ディスク<code>B</code>でインストールが実行される場合、 <code>B</code> の <code>.pnpm-store</code> に独立したストアが作成されます。 プロジェクトは引き続きpnpmの利点を維持しますが、各ドライブには重複したパッケージが含まれる場合があります。</p><h2 class="anchor anchorWithStickyNavbar_tK0N" id="what-does-pnpm-store-prune-do-is-it-harmful">What does <code>pnpm store prune</code> do? Is it harmful?<a class="hash-link" href="#what-does-pnpm-store-prune-do-is-it-harmful" title="見出しへの直接リンク">​</a></h2><p>The command <code>pnpm store prune</code> removes <em>unreferenced packages</em>.</p><p>Unreferenced packages are packages that are not used by any projects on the system. Packages can become unreferenced after most installation operations, for instance when dependencies are made redundant.</p><p>For example, during <code>pnpm install</code>, package <code>foo@1.0.0</code> is updated to <code>foo@1.0.1</code>. pnpm will keep <code>foo@1.0.0</code> in the store, as it does not automatically remove packages. If package <code>foo@1.0.0</code> is not used by any other project on the system, it becomes unreferenced. Running <code>pnpm store prune</code> would remove <code>foo@1.0.0</code> from the store.</p><p>Running <code>pnpm store prune</code> is not harmful and has no side effects on your projects. If future installations require removed packages, pnpm will download them again.</p><p>It is best practice to run <code>pnpm store prune</code> occasionally to clean up the store, but not too frequently. Sometimes, unreferenced packages become required again. This could occur when switching branches and installing older dependencies, in which case pnpm would need to re-download all removed packages, briefly slowing down the installation process.</p><h2 class="anchor anchorWithStickyNavbar_tK0N" id="pnpm-は何の略ですか"><code>pnpm</code> は何の略ですか？<a class="hash-link" href="#pnpm-は何の略ですか" title="見出しへの直接リンク">​</a></h2><p><code>pnpm</code> は <code>performant npm</code> の略です。 <a href="https://github.com/rstacruz/" target="_blank" rel="noopener noreferrer">@rstacruz</a> がこの名前を考案しました。</p><h2 class="anchor anchorWithStickyNavbar_tK0N" id="pnpm-does-not-work-with-your-project-here"><code>pnpm</code> does not work with <!-- -->&lt;<!-- -->YOUR-PROJECT-HERE&gt;?<a class="hash-link" href="#pnpm-does-not-work-with-your-project-here" title="見出しへの直接リンク">​</a></h2><p>In most cases it means that one of the dependencies require packages not declared in <code>package.json</code>. It is a common mistake caused by flat <code>node_modules</code>. If this happens, this is an error in the dependency and the dependency should be fixed. That might take time though, so pnpm supports workarounds to make the buggy packages work.</p><h3 class="anchor anchorWithStickyNavbar_tK0N" id="解決策1">解決策1<a class="hash-link" href="#解決策1" title="見出しへの直接リンク">​</a></h3><p>In the following example, a dependency does <strong>not</strong> have the <code>iterall</code> module in its own list of deps.</p><p>The easiest solution to resolve missing dependencies of the buggy packages is to <strong>add <code>iterall</code> as a dependency to our project&#x27;s <code>package.json</code></strong>.</p><p>You can do so, by installing it via <code>pnpm add iterall</code>, and will be automatically added to your project&#x27;s <code>package.json</code>.</p><div class="codeBlockContainer_Azab language-json theme-code-block"><div class="codeBlockContent_cFWc" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-json codeBlock_lj2n thin-scrollbar"><code class="codeBlockLines_EPLE"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;dependencies&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;iterall&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;^1.2.2&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="copyButton_esMk clean-btn"><span class="copyButtonIcons_S5VN" aria-hidden="true"><svg class="copyButtonIcon_j9v0" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_ecZC" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithStickyNavbar_tK0N" id="解決策2">解決策2<a class="hash-link" href="#解決策2" title="見出しへの直接リンク">​</a></h3><p>One of the solutions is to use <a href="/ja/5.x/pnpmfile#hooks">hooks</a> for adding the missing dependencies to the package&#x27;s <code>package.json</code>.</p><p>An example was <a href="https://github.com/pnpm/pnpm/issues/1043" target="_blank" rel="noopener noreferrer">Webpack Dashboard</a> which wasn&#x27;t working with <code>pnpm</code>. It has since been resolved such that it works with <code>pnpm</code> now.</p><p>It used to throw an error:</p><div class="codeBlockContainer_Azab language-console theme-code-block"><div class="codeBlockContent_cFWc" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-console codeBlock_lj2n thin-scrollbar"><code class="codeBlockLines_EPLE"><span class="token-line" style="color:#393A34"><span class="token plain">Error: Cannot find module &#x27;babel-traverse&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  at /node_modules/inspectpack@2.2.3/node_modules/inspectpack/lib/actions/parse</span><br></span></code></pre><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="copyButton_esMk clean-btn"><span class="copyButtonIcons_S5VN" aria-hidden="true"><svg class="copyButtonIcon_j9v0" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_ecZC" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>The problem was that <code>babel-traverse</code> was used in <code>inspectpack</code> which was used by <code>webpack-dashboard</code>, but <code>babel-traverse</code> wasn&#x27;t specified in <code>inspectpack</code>&#x27;s <code>package.json</code>. It still worked with <code>npm</code> and <code>yarn</code> because they create flat <code>node_modules</code>.</p><p>The solution was to create a <code>pnpmfile.js</code> with the following contents:</p><div class="codeBlockContainer_Azab language-js theme-code-block"><div class="codeBlockContent_cFWc" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-js codeBlock_lj2n thin-scrollbar"><code class="codeBlockLines_EPLE"><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">hooks</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function-variable function" style="color:#d73a49">readPackage</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">pkg</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pkg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">name</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;inspectpack&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pkg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">dependencies</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;babel-traverse&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;^6.26.0&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> pkg</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="copyButton_esMk clean-btn"><span class="copyButtonIcons_S5VN" aria-hidden="true"><svg class="copyButtonIcon_j9v0" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_ecZC" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>After creating a <code>pnpmfile.js</code>, delete <code>pnpm-lock.yaml</code> only - there is no need to delete <code>node_modules</code>, as pnpm hooks only effect module resolution. Then, rebuild the dependencies &amp; it should be working.</p><h3 class="anchor anchorWithStickyNavbar_tK0N" id="解決策3">解決策3<a class="hash-link" href="#解決策3" title="見出しへの直接リンク">​</a></h3><p>In case there are too many issues, you can use the <code>shamefully-hoist</code> option. This creates a flat <code>node_modules</code> structure similar to the one created by <code>npm</code> or <code>yarn</code>, which is not recommended as avoiding this structure is the primary purpose of pnpm&#x27;s <code>node_modules</code> approach.</p><p>To use it, try <code>pnpm install --shamefully-hoist</code>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://crowdin.com/project/pnpm/ja" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Vti9" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>このページを編集</a></div><div class="col lastUpdated_Nz0d"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="ページナビゲーションをドキュメント"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div><div class="col col--3"><div class="tableOfContents_Kn8V thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#なぜ-node_modules-フォルダはパッケージがグローバルストアに保存されている場合にディスク容量を使用するのですか" class="table-of-contents__link toc-highlight">なぜ、 <code>node_modules</code> フォルダは、パッケージがグローバルストアに保存されている場合にディスク容量を使用するのですか?</a></li><li><a href="#windowsで動作しますか" class="table-of-contents__link toc-highlight">Windowsで動作しますか？</a></li><li><a href="#しかしネストされた-node_modules-アプローチは-windows-と互換性がありますか" class="table-of-contents__link toc-highlight">しかし、ネストされた <code>node_modules</code> アプローチは Windows と互換性がありますか？</a></li><li><a href="#循環シンボリックリンクはどうですか" class="table-of-contents__link toc-highlight">循環シンボリックリンクはどうですか？</a></li><li><a href="#なぜハードリンクを使うのですか-直接グローバルストアへのシンボリックリンクを作ってはどうですか" class="table-of-contents__link toc-highlight">なぜハードリンクを使うのですか？ 直接グローバルストアへのシンボリックリンクを作ってはどうですか？</a></li><li><a href="#pnpmは複数のドライブまたはファイルシステムをまたいで機能しますか" class="table-of-contents__link toc-highlight">pnpmは複数のドライブまたはファイルシステムをまたいで機能しますか？</a><ul><li><a href="#ストアのパスが指定された場合" class="table-of-contents__link toc-highlight">ストアのパスが指定された場合</a></li><li><a href="#ストアのパスが指定されていない場合" class="table-of-contents__link toc-highlight">ストアのパスが指定されていない場合</a></li></ul></li><li><a href="#what-does-pnpm-store-prune-do-is-it-harmful" class="table-of-contents__link toc-highlight">What does <code>pnpm store prune</code> do? Is it harmful?</a></li><li><a href="#pnpm-は何の略ですか" class="table-of-contents__link toc-highlight"><code>pnpm</code> は何の略ですか？</a></li><li><a href="#pnpm-does-not-work-with-your-project-here" class="table-of-contents__link toc-highlight"><code>pnpm</code> does not work with &lt;YOUR-PROJECT-HERE&gt;?</a><ul><li><a href="#解決策1" class="table-of-contents__link toc-highlight">解決策1</a></li><li><a href="#解決策2" class="table-of-contents__link toc-highlight">解決策2</a></li><li><a href="#解決策3" class="table-of-contents__link toc-highlight">解決策3</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">ドキュメント</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/ja/installation">はじめに</a></li><li class="footer__item"><a class="footer__link-item" href="/ja/pnpm-cli">pnpm CLI</a></li><li class="footer__item"><a class="footer__link-item" href="/ja/workspaces">ワークスペース</a></li><li class="footer__item"><a class="footer__link-item" href="/ja/npmrc">.npmrc</a></li></ul></div><div class="col footer__col"><div class="footer__title">コミュニティ</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/ja/users">ユーザー導入例</a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/pnpm" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_rIxf"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://r.pnpm.io/chat" target="_blank" rel="noopener noreferrer" class="footer__link-item">プロジェクトチャット<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_rIxf"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/pnpmjs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_rIxf"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">開発への協力・貢献</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/pnpm/pnpm" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_rIxf"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://crowdin.com/project/pnpm" target="_blank" rel="noopener noreferrer" class="footer__link-item">翻訳に協力する<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_rIxf"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title"></div><ul class="footer__items"><li class="footer__item"><a href="https://www.netlify.com">
  <img src="https://www.netlify.com/img/global/badges/netlify-light.svg" alt="Deploys by Netlify">
</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/ja/img/pnpm-light.svg" class="themedImage_md4L themedImage--light_NL4s footer__logo"><img src="/ja/img/pnpm-light.svg" class="themedImage_md4L themedImage--dark_aB73 footer__logo"></div><div class="footer__copyright">Copyright © 2015-2022 contributors of pnpm</div></div></div></footer></div>
<script src="/ja/assets/js/runtime~main.ec198b6b.js"></script>
<script src="/ja/assets/js/main.0718ccfe.js"></script>
</body>
</html>